<!DOCTYPE html>

<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>主页</title>
    <!--<script type="text/javascript" src="../../resources/js/jquip.min.js" th:src="@{/resources/js/jquip.events.min.js}"></script>-->
    <script type="text/javascript" src="../../resources/js/jquery.tools.min.js" th:src="@{/resources/js/jquery.tools.min.js}"></script>
    <link href="../../resources/css/style.css" th:href="@{/resources/css/style.css}" rel="stylesheet"/>

    <script type="text/javascript">
        function search() {
            var text = $("#search").val();
            $("#tbContent tr").not(":contains('"+text+"')").hide();
            $("#tbContent tr:contains('"+text+"')").show();
        }
        function start() {
            window.confirm("您确定要启动数据采集服务运行吗？");
            window.location.href = "/main/start"
        }

        function stop() {
            window.confirm("您确定要停止数据采集服务运行吗？");
            window.location.href = "/main/stop"
        }

        function edit() {
            window.location.href = "/main/edit"
        }
    </script>
</head>
<body>
<div style="width: 300px; float: left;">
    <input type="button" value="启动" th:disabled="${running}" onclick="start()"/>
    <input type="button" value="停止" th:disabled="${not running}" onclick="stop()"/>
    <input type="button" value="设置" onclick="edit()" />
    <table class="dataintable" style="margin-top: 10px">
        <tbody>
        <tr>
            <th>运行模式</th> <td th:text="${mode}"></td>
        </tr>
        <tr>
            <th>运行状态</th> <td th:text="${running} ? '运行' : '待机'"></td>
        </tr>
        <tr>
            <th>采集通道数量</th> <td th:text="${channelSize}"></td>
        </tr>
        </tbody>
    </table>
</div>
<div style="margin: 10px 0 0 300px;">
    <input id="search" type="text" width="100" /> <input type="button" value="搜索" onclick="search()"/>
    <table class="dataintable" style="margin-top: 10px">
        <thead>
        <tr>
            <th id="nameSort">通道名称</th>
            <th id="idxSort">序号</th>
            <th>通讯规约</th>
            <th>端口信息</th>
        </tr>
        </thead>
        <tbody id="tbContent">
        <tr th:each="channel : ${channels}" th:title="'通讯帧：' + ${channel.frames}">
            <td th:text="${channel.name}"></td>
            <td th:text="${channel.idx}"></td>
            <td th:text="${channel.protocal}"></td>
            <td th:text="${channel.portInfo}"></td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>